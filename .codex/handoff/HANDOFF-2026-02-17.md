# SoloBoss AI Handoff (2026-02-17)

## Session Goal

카카오톡 연동 중심 + 최소 웹 콘솔 전략에 맞춰 `SoloBoss AI`의 UX 흐름과 인수 가능한 문서 패키지를 확정했다.

## Confirmed Product Direction

- Primary channel: `카카오톡 연동 중심 + 최소 웹 콘솔`
- Input: 카카오톡 채널로 상담 스크린샷/음성 유입
- Output: 상세 조회/통계는 모바일 최적화 최소 웹 콘솔
- Notification: 접수/결과/리마인드는 카카오 알림톡
- Confidence policy: `하이브리드`
  - `overall_confidence >= 0.85`: 자동 저장
  - `overall_confidence < 0.85`: 검수 필요

## What Was Produced

`ux-research` 패키지 생성 완료:

- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/README.md`
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/notifications/alimtalk-templates.md`
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/api/kakao-ingestion-events.md`
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/diagrams/state-transitions.md`

## UX/Flow Summary

1. 카카오 Webhook 수신 -> 즉시 접수 알림
2. 비동기 처리(OCR -> LLM 구조화 -> 신뢰도 평가)
3. 분기:
   - 자동 저장: 고객/상담/팔로업 생성 후 완료 알림
   - 검수 필요: review_task 생성 후 검수 알림 + 딥링크
4. 후속:
   - 관계 메모리 갱신
   - 임베딩(pgvector) 저장
   - 팔로업 초안 생성/리마인드

## API Sequence Reference

주요 이벤트 체인:

- `POST /api/v1/integrations/kakao/webhook`
- `POST /api/v1/ingest/jobs`
- `POST /api/v1/notifications/alimtalk` (RECEIVED_ACK)
- `POST /api/v1/ai/ocr/extract`
- `POST /api/v1/ai/crm/structure`
- `POST /api/v1/ai/confidence/score`
- 분기:
  - `POST /api/v1/crm/conversations/auto-save`
  - 또는 `POST /api/v1/reviews`
- `PATCH /api/v1/ingest/jobs/{job_id}/status`

자세한 request schema는:
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/api/kakao-ingestion-events.md`

## State Machines Reference

- `ingest_job`: `RECEIVED -> OCR_DONE -> STRUCTURED -> AUTO_SAVED | NEEDS_REVIEW | FAILED`
- `review_task`: `OPEN -> IN_PROGRESS -> RESOLVED | EXPIRED`
- `follow_up_task`: `SCHEDULED -> DRAFT_READY -> SENT | EDITING | SNOOZED | CANCELED`

원본 다이어그램:
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/diagrams/state-transitions.md`

## Copy/Template Reference

알림톡 템플릿 코드:

- `RECEIVED_ACK`
- `PROCESS_AUTO_DONE`
- `PROCESS_REVIEW_REQUIRED`
- `FOLLOWUP_REMINDER`

원본 템플릿:
- `/Users/mediquitous/Desktop/project/solo-boss/ux-research/notifications/alimtalk-templates.md`

## Decisions Locked

- 카톡 중심 UX는 유지 (웹 콘솔은 보조)
- 검수는 예외 플로우로 최소화
- 알림은 행동 CTA 중심(확인/전송/미루기)
- 시간 저장은 `UTC`, 사용자 노출은 `Asia/Seoul`
- 멱등키 기준: `channel_id:message_id`

## Recommended Next Session Plan

1. 백엔드 팀이 바로 쓸 `OpenAPI YAML` 초안 추가
2. 알림톡 템플릿 변수명 표준화(`snake_case`) 및 enum 고정
3. 웹 콘솔 검수 화면의 최소 입력 컴포넌트 명세 작성
4. 임계치(0.85) 운영 실험 KPI 정의

## Handoff Notes for Any AI Agent

- UX 기준 문서를 source of truth로 사용한다.
- 신규 제안이 기존 임계치/상태전이/템플릿을 깨면 먼저 변경 영향도를 명시한다.
- 구현 문서를 작성할 때 위 `ux-research` 문서를 우선 참조하고, 불일치 시 이 handoff 문서를 업데이트한다.
